la fopen copia un file presente sul disco in ram e prende l'indirizzo dell'inizio di quel file mentre la fclose chiude ed elimina il file in ram

+ Quando il puntatore non riesce ad aprire il file diventa 0, ovvero null.
+ Quando una funzione che ha a che fare con gli indirizzi di memoria fallisce assume il valore null (0)

fp = puntatore a un file caricato dal disco, verso la memoria RAM
se qualsiasi funzione che restituisce un puntatore fallisce, viene sempre
restituito NULL.
in caso di successo viene restituito un untatore all'area di ram dove si
trova il file caricato.

i parametri della funzione `FILE` sono i seguenti
r rb r+ rb+ w wb w+ wb+ a ab a+ ab+
Se qualsiasi funzione che restituisce un puntatore fallisce, viene sempre restituito `NULL`.
In caso di successo viene restituito un puntatore alla struttura che gestisce il file (stream).

| Valore | Modalità            | Tipo file | Se il file non esiste |
| :----: | :------------------ | :-------- | :-------------------- |
|  `r`   | Lettura             | testuali  | errore                |
|  `rb`  | Lettura             | binari    | errore                |
|  `r+`  | Lettura e Scrittura | testuali  | errore                |
| `rb+`  | Lettura e Scrittura | binari    | errore                |
|  `w`   | Scrittura           | testuali  | viene creato          |
|  `wb`  | Scrittura           | binari    | viene creato          |
|  `w+`  | Scrittura e Lettura | testuali  | viene creato          |
| `wb+`  | Scrittura e Lettura | binari    | viene creato          |
|  `a`   | Append (Aggiungi)   | testuali  | viene creato          |
|  `ab`  | Append (Aggiungi)   | binari    | viene creato          |
|  `a+`  | Append (Aggiungi)   | testuali  | viene creato          |
| `ab+`  | Append (Aggiungi)   | binari    | viene creato          |


La funzione `feof` serve per accorgersi se si è alla fine del file.

Sia quando si legge che quando si scrive, `fp` (file pointer) si sposta in avanti.

La funzione `fseek` permette di resettare o spostare la posizione di `fp` (se viene impostata a zero ritorna all'inizio).

a è come se fosse una w ma parte dal `fondo`

``` C
#include <stdio.h>
#include <stdlib.h>

int main() {
  FILE *sourceFile = fopen("./mio-file.txt", "r");
  FILE *destFile = fopen("./altro-file", "w");

  if (sourceFile == NULL || destFile == NULL) {
    printf("Errore di apertura di un file\n");
  }

  int valore;
  fscanf(sourceFile, "%d", &valore);

  fprintf(destFile, "%d\n", valore);

  fclose(sourceFile);
  fclose(destFile);
}
```
%% questo programma prende un file di sorgente e uno di destinazione e copia una riga nel file di sorgente nel file di destinazione %%


`sizeof` = la dimensione in byte occupata da una variabile

### La funzione `fread`
``` C
int x;
fread(&x, // dove finisce quello che leggo dal file
	sizeof(int), // quanti byte devo scrivere, restituisce 4 
				 // perchè int occupa 4 byte
	1, // quante volte leggo (utile in caso si debba leggere un vettore)
	fp // da dove leggo
	)
```

### La funzione `fwrite`
``` C
threeNum x;
x.n1=10;
x.n2=5;
x.n3=1;

fwrite(&x, // da dove pesco ciò che scrivo
	   sizeof(threeNum), //quanti byte devo scrivere
	   1, // quante volte scrivo
	   fp // dove scrivo
	  )
```

## SPOSTARE UN FILE

### La funzione `rename()`
La funzione `rename` serve a spostare o rinominare un file.
``` C 
#include <stdio.h>

int main() {
  rename("./file-prova.txt", "./file-prova-rinominato.txt");
}
```

